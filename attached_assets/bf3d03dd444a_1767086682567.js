let dayMs=864e5,visitorIdKey="_front_kb_visitor_id",node=document.createElement("base"),knowledgeBaseEditedTextTranslations=(node.href=document.location.href,document.head.append(node),{bs:"Uređeno",bg:"Редактирано",ca:"Editat","zh-CN":"已编辑","zh-TW":"已編輯",hr:"Uređeno",cs:"Upraveno",da:"Redigeret",nl:"Bewerkt",en:"Edited",et:"Muudetud",fi:"Muokattu",fr:"Modifié",de:"Bearbeitet",el:"Επεξεργασμένο",hu:"Szerkesztve",is:"Breytt",id:"Diedit",it:"Modificato",ja:"編集済み",ko:"편집됨",lv:"Rediģēts",lt:"Redaguota",ms:"Disunting",no:"Redigert",pl:"Edytowane","pt-BR":"Editado","pt-PT":"Editado",ro:"Editat",ru:"Отредактировано",sr:"Uređeno",sk:"Upravené",sl:"Urejeno",es:"Editado",sv:"Redigerad",tr:"Düzenlendi",uk:"Відредаговано",vi:"Đã chỉnh sửa"}),knowledgeBaseNoResultsTextTranslations={bs:"Nema rezultata.",bg:"Няма резултати.",ca:"No hi ha resultats.","zh-CN":"没有结果。","zh-TW":"沒有結果。",hr:"Nema rezultata.",cs:"Žádné výsledky.",da:"Ingen resultater.",nl:"Geen resultaten.",en:"No results.",et:"Tulemusi pole.",fi:"Ei tuloksia.",fr:"Aucun résultat.",de:"Keine Ergebnisse.",el:"Δεν υπάρχουν αποτελέσματα.",hu:"Nincs találat.",is:"Engin niðurstöður.",id:"Tidak ada hasil.",it:"Nessun risultato.",ja:"結果がありません。",ko:"결과가 없습니다.",lv:"Nav rezultātu.",lt:"Nėra rezultatų.",ms:"Tiada hasil.",no:"Ingen resultater.",pl:"Brak wyników.","pt-BR":"Sem resultados.","pt-PT":"Sem resultados.",ro:"Niciun rezultat.",ru:"Нет результатов.",sr:"Nema rezultata.",sk:"Žiadne výsledky.",sl:"Ni rezultatov.",es:"Sin resultados.",sv:"Inga resultat.",tr:"Sonuç yok.",uk:"Немає результатів.",vi:"Không có kết quả."},knowledgeBaseShowMoreTextTranslations={bs:"Prikaži više",bg:"Покажи повече",ca:"Mostra més","zh-CN":"显示更多","zh-TW":"顯示更多",hr:"Prikaži više",cs:"Zobrazit více",da:"Vis mere",nl:"Meer weergeven",en:"Show more",et:"Näita rohkem",fi:"Näytä lisää",fr:"Afficher plus",de:"Mehr anzeigen",el:"Εμφάνιση περισσότερων",hu:"Továbbiak megjelenítése",is:"Sýna meira",id:"Tampilkan lebih banyak",it:"Mostra altro",ja:"もっと表示",ko:"더보기",lv:"Rādīt vairāk",lt:"Rodyti daugiau",ms:"Tunjukkan lagi",no:"Vis mer",pl:"Pokaż więcej","pt-BR":"Mostrar mais","pt-PT":"Mostrar mais",ro:"Arată mai mult",ru:"Показать больше",sr:"Prikaži više",sk:"Zobraziť viac",sl:"Prikaži več",es:"Mostrar más",sv:"Visa mer",tr:"Daha fazla göster",uk:"Показати більше",vi:"Hiển thị thêm"},knowledgeBaseSearchTextTranslations={bs:"Pretraga",bg:"Търсене",ca:"Cerca","zh-CN":"搜索","zh-TW":"搜索",hr:"Pretraga",cs:"Vyhledávání",da:"Søg",nl:"Zoeken",en:"Search",et:"Otsing",fi:"Haku",fr:"Rechercher",de:"Suche",el:"Αναζήτηση",hu:"Keresés",is:"Leita",id:"Pencarian",it:"Ricerca",ja:"検索",ko:"검색",lv:"Meklēt",lt:"Paieška",ms:"Carian",no:"Søk",pl:"Szukaj","pt-BR":"Pesquisar","pt-PT":"Pesquisar",ro:"Căutare",ru:"Поиск",sr:"Pretraga",sk:"Vyhľadávanie",sl:"Iskanje",es:"Buscar",sv:"Sök",tr:"Arama",uk:"Пошук",vi:"Tìm kiếm"};function searchHitOnClick(e,t){return interactionEventClient.sendSearchResultClickInteractionAsync(e,t)}function computeEditedTime(e,t){e=computeFormatInfo(Math.round(e/dayMs));return new Intl.RelativeTimeFormat(t,{numeric:"auto"}).format(-e.value,e.format)}function computeFormatInfo(e){return 30<e&&e<365?{format:"month",value:Math.round(e/31)}:365<=e?{format:"year",value:Math.round(e/365)}:{format:"day",value:e}}async function copyToClipboard(e){await navigator.clipboard.writeText(e)}function extractLocale(e){if(e)return e.match(/[a-zA-Z]{2}[_-]?[a-zA-Z]{0,2}/g)[0]}function getLocaleFromUrl(){var e=new URL(window.location.href);return e.pathname.includes("/preview")?extractLocale(e.searchParams.get("locale"))||window.defaultLocale:extractLocale(e.searchParams.get("locale"))||window.location.pathname.match(/\/(\w{2}(?:-\w{2})?)(?=\/|$)/)?.[1]||window.defaultLocale}function setHiddenState(e,t){e=document.querySelector(e);e&&(t?e.classList.remove("hidden"):e.classList.add("hidden"))}function initAlgoliaSearchBox(e,t,i,n=!0){if(!document.getElementById("pageHeaderSearchBox"))return;var a=algoliasearch(window.AlgoliaClientAppId,window.AlgoliaClientApiKey);let r=t+" .ais-SearchBox-input",s=!0,o=instantsearch({indexName:window.AlgoliaIndexName,searchClient:a,searchFunction(e){setIsShowingDropdown(i,""!==e.state.query);var t=new URLSearchParams(window.location.search).get("query");s&&t&&e.setQuery(t),e.search()}}),c;o.addWidgets([instantsearch.widgets.configure({hitsPerPage:4,attributesToSnippet:["text","description"]}),instantsearch.widgets.searchBox({container:t,showSubmit:!1,showReset:!1,placeholder:e,queryHook(e,t){clearTimeout(c),c=setTimeout(()=>(interactionEventClient.sendSearchInteractionAsync(e),t(e)),500)}}),instantsearch.widgets.hits({container:i,templates:{empty(e,{}){n||setIsShowingDropdown(i,!1),setIsShowingDropdownContent(i,!1),setIsShowingDropdownEmptyState(i,n),setIsShowingDropdownLoadingState(i,!1)},item(e,{html:t,components:n}){setIsShowingDropdownContent(i,!0),setIsShowingDropdownEmptyState(i,!1),setIsShowingDropdownLoadingState(i,!1);var a=document.querySelector(r).value.trim();return a&&!s&&setIsShowingDropdown(i,!0),"link"===e.type?renderLinkCardItem(e,{html:t,components:n},!0):("category"===e.type?renderCategoryCardItem:renderArticleCardItem)(e,{html:t,components:n},a,!0)}}})]),o.start();a=document.querySelector(r);let d=()=>document.querySelector(r)?.value,l=e=>{var t=new URL(h.href);return t.searchParams.set("query",e||d()),t.href},h=(a.addEventListener("blur",e=>{e.relatedTarget&&(e.relatedTarget.classList.contains("article-card-sm")||e.relatedTarget.classList.contains("category-search-card-sm")||"moreResultsLink"===e.relatedTarget.id)||setIsShowingDropdown(i,!1)}),a.addEventListener("keydown",e=>{var t=d();"Enter"===e.key&&t&&(interactionEventClient.sendSearchInteractionAsync(t),e=l(t),window.location=e)}),o.on("render",()=>{("stalled"===o.status||"loading"===o.status?(setIsShowingDropdownLoadingState(i,!0),setIsShowingDropdownContent(i,!1),setIsShowingDropdownEmptyState):setIsShowingDropdownLoadingState)(i,!1)}),a.addEventListener("focus",e=>{var{searchBox:t,hits:n}=o.renderState.knowledge_base_resources;s=!1,t.query.trim()&&0<n.hits.length&&setIsShowingDropdown(i,!0)}),document.querySelector(i+"-more-button #moreResultsLink"));h.onclick=()=>{var e=l();h.href=e}}function renderArticleCardItem(e,{html:t,components:n},a,i=!1){var r=getLocaleFromUrl(),s=computeEditedTime(Date.now()-e.revision_created_at,r);let o=new URL(window.location.href),c=(o.pathname=o.pathname.replace("/search",""),a||o.searchParams.get("query"));o.searchParams.delete("query");var a=o.pathname.includes("/preview"),d=o.pathname.split("/preview")[0];return o.pathname=a?d+"/preview/articles/"+e.article_id:`/${r}/articles/`+e.article_id,o.hash="",t`
    <a className="article-card search-result-card ${i?"article-card-sm":""}" href="${o.href}" onClick=${()=>searchHitOnClick(c,o.href)} tabindex="-1">
      <div className="article-card-header">
        <div class="kb-inline-icon article"/>
        <div className="article-card-header-title ${i?"article-title-sm":""}">${n.Highlight({attribute:"name",hit:e})}</div>
        <div className="article-edited-wrapper">
          ${knowledgeBaseEditedTextTranslations[r]} ${s}
        </div>
      </div>
    <div className="article-card-details">${n.Snippet({attribute:"text",hit:e})}</div>
  </a>
  `}function renderCategoryCardItem(e,{html:t,components:n},a,i=!1){var r=getLocaleFromUrl(),s=computeEditedTime(Date.now()-e.updated_at,r);let o=new URL(window.location.href),c=(o.pathname=o.pathname.replace("/search",""),a||o.searchParams.get("query"));o.searchParams.delete("query");var a=o.pathname.includes("/preview"),d=o.pathname.split("/preview")[0];return o.pathname=a?d+"/preview/categories/"+e.id:`/${r}/categories/`+e.id,o.hash="",t`
    <a className="category-search-card search-result-card ${i?"category-search-card-sm":""}" href="${o.href}" onClick=${()=>searchHitOnClick(c,o.href)} tabindex="-1">
      <div className="category-search-card-header">
        <img className="category-inline-icon" src="https://assets.frontapp.com/knowledge-base/assets/icons/${e.icon??"folder"}.svg" />
        <div className="category-search-card-header-title ${i?"category-title-sm":""}">${n.Highlight({attribute:"name",hit:e})}</div>
        <div className="category-edited-wrapper">
          ${knowledgeBaseEditedTextTranslations[r]} ${s}
        </div>
      </div>
    <div className="category-search-card-details">${n.Snippet({attribute:"description",hit:e})}</div>
  </a>
  `}function renderLinkCardItem(e,{html:t,components:n},a=!1){return t`
    <a className="category-search-card search-result-card ${a?"category-search-card-sm":""}" href="${e.url}" onClick=${()=>searchHitOnClick(searchTerm,e.url)} tabindex="-1" target="_blank">
      <div className="category-search-card-header">
        <img className="category-inline-icon" src="https://assets.frontapp.com/knowledge-base/assets/icons/${e.icon??"link"}.svg" />
        <div className="category-search-card-header-title ${a?"category-title-sm":""}">${n.Highlight({attribute:"name",hit:e})}</div>
        <div className="category-edited-wrapper">
          <img className="category-inline-icon" src="https://assets.frontapp.com/knowledge-base/assets/icons/external_link.svg" />
        </div>
      </div>
    <div className="category-search-card-details">${n.Snippet({attribute:"description",hit:e})}</div>
  </a>
  `}function setIsShowingDropdown(e,t){e=document.querySelector(e+"-wrapper");t?e.classList.remove("hidden"):e.classList.add("hidden")}function setIsShowingDropdownEmptyState(e,t){e=document.querySelector(e+"-wrapper .search-dropdown-empty-state");t?e.classList.remove("hidden"):e.classList.add("hidden")}function setIsShowingDropdownLoadingState(e,t){e=document.querySelector(e+"-wrapper .search-dropdown-loading-indicator");t?e.classList.remove("hidden"):e.classList.add("hidden")}function setIsShowingDropdownContent(e,t){var n=document.querySelector(e+"-wrapper .search-dropdown-more-button"),e=document.getElementById(e.substring(1));t?(n.classList.remove("hidden"),e.classList.remove("hidden")):(n.classList.add("hidden"),e.classList.add("hidden"))}let isGAEnabled=Boolean(window.googleAnalyticsTag);function setGoogleTagCookiePermissions(e){if(isGAEnabled)return e={analytics_storage:e?"granted":"denied",functionality_storage:"denied",security_storage:"denied",ad_storage:"denied",personalization:"denied"},gtag("consent","update",e),e}function hasLocalStorage(){return"undefined"!=typeof localStorage}class PermissionsManager{static getCurrentPermissions(){return hasLocalStorage()?JSON.parse(localStorage.getItem("cookiePermissions")||"{}"):{}}static getVisitorId(){return this.getCurrentPermissions()[visitorIdKey]}static getTrackingConsent(){return this.getCurrentPermissions().consented}static getGoogleTag(){return this.getCurrentPermissions().googleTag}static hasExistingPermissions(){return 0<Object.keys(this.getCurrentPermissions()).length}static updateTrackingConsent(t){var n=setGoogleTagCookiePermissions(t);if(hasLocalStorage()){let e=PermissionsManager.getVisitorId();!e&&self.crypto&&(e=crypto.randomUUID()),localStorage.setItem("cookiePermissions",JSON.stringify({googleTag:n,consented:t,...t?{[visitorIdKey]:e}:{}}))}}}class InteractionEventClient{url;pageViewWasSent;visitorId;userConsented;isEnabled;searchesSent;constructor(e=window.aHost,t=window.cslug,n=window.kbid,a=window.kbServer){this.isEnabled=Boolean(e&&t&&n),this.url=e+`/api/1/noauth/companies/${t}/knowledge_bases/${n}/anltcs/events`,this.urlV2=a+"/portal_event",this.searchesSent=new Set,this.userConsented=PermissionsManager.getTrackingConsent()||!1,this.visitorId=PermissionsManager.getVisitorId()}sendInteractionAsync(n={}){return new Promise((e,t)=>{if(!this.isEnabled)return e();fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,...this.userConsented?{v_id:this.visitorId}:{},ul:this.getLocale(),upn:window.location.pathname+window.location.search}),keepalive:!0,referrerPolicy:"no-referrer-when-downgrade"}).then(()=>e()).catch(()=>t())})}sendInteractionV2Async(n={}){return new Promise((e,t)=>{if(!this.isEnabled)return e();fetch(this.urlV2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,...this.userConsented?{v_id:this.visitorId}:{},ul:this.getLocale(),k_id:parseInt(window.kbid,10),cs:window.cslug,upn:window.location.pathname+window.location.search}),keepalive:!0,referrerPolicy:"no-referrer-when-downgrade"}).then(()=>e()).catch(()=>t())})}sendPageViewInteractionAsync(){if(!this.pageViewWasSent)return this.sendInteractionAsync({et:"page_view"}).then(()=>this.pageViewWasSent=!0)}sendArticleLikedInteractionAsync(){return this.sendInteractionV2Async({et:"article_liked"})}sendArticleDislikedInteractionAsync(){return this.sendInteractionV2Async({et:"article_disliked"})}sendSearchInteractionAsync(e){if(!this.searchesSent.has(e))return this.sendInteractionAsync({et:"search",st:e}).then(()=>this.searchesSent.add(e))}sendSearchResultClickInteractionAsync(e,t){return this.sendInteractionAsync({et:"search_hit",st:e,t_url:t})}sendUserConsentAsync(){return this.sendInteractionAsync({et:"consented"})}getLocale(){return getLocaleFromUrl()}getIsEnabled(){return this.isEnabled}updateUserConsentAsync(e){e&&this.userConsented||((this.userConsented=e)?(this.visitorId=PermissionsManager.getVisitorId(),this.sendUserConsentAsync()):this.visitorId=void 0)}}let interactionEventClient=new InteractionEventClient;function setIsShowingCookieBanner(e){var t=document.getElementById("cookie-banner-container");e?t.classList.remove("hidden"):t.classList.add("hidden")}function isTrackingEnabled(){return isGAEnabled||interactionEventClient.getIsEnabled()}function isConsentAccepted(){return!isTrackingEnabled()||PermissionsManager.getTrackingConsent()}function acceptTrackingCookies(){PermissionsManager.updateTrackingConsent(!0),interactionEventClient.updateUserConsentAsync(!0),setIsShowingCookieBanner(!1)}function rejectTrackingCookies(){PermissionsManager.updateTrackingConsent(!1),interactionEventClient.updateUserConsentAsync(!1),setIsShowingCookieBanner(!1)}function initCookiePermissions(){if(isTrackingEnabled())if(PermissionsManager.hasExistingPermissions()){if(isGAEnabled){let e=PermissionsManager.getGoogleTag();e||(PermissionsManager.updateTrackingConsent(PermissionsManager.getTrackingConsent()||!1),e=PermissionsManager.getGoogleTag()),gtag("consent","update",e)}}else setIsShowingCookieBanner(!0)}let cookieBanner=document.getElementById("cookie-banner-container"),openPrivacyPreferencesButton=(cookieBanner&&(document.getElementById("cookie-accept-button").addEventListener("click",acceptTrackingCookies),document.getElementById("cookie-reject-button").addEventListener("click",rejectTrackingCookies)),document.getElementById("open-privacy-preferences"));function setupLocaleDropdown(){var e,t=document.querySelector(".kb-dropdown.language");t&&((e=window.defaultLocale)&&(t.value=e),t.addEventListener("change",e=>{redirectToNewLocale(e.target.value)}))}function redirectToNewLocale(e){var t=new URL(window.location.href);t.searchParams.get("locale")||t.pathname.includes("/preview")?(t.searchParams.set("locale",e),window.location.href=t.href):"/"===window.location.pathname?window.location.pathname=`/${e}/`:(t=window.location.pathname.replace(/\/(\w{2}(?:-\w{2})?)(?=\/|$)/,"/"+e),window.location.pathname=t)}function initFrontChatWidget(){var e;window.frontChatScriptSrc&&window.frontChatId&&((e=document.createElement("script")).src=window.frontChatScriptSrc,e.async=!0,e.onload=async()=>{var e,t,n;window.FrontChat?(e={chatId:window.frontChatId,namespace:window.kubeNamespace||"",useDefaultLauncher:!0},"restricted"!==window.knowledgeBaseAccessType?window.FrontChat("init",e):({chatUserHash:t,email:n}=await fetch(window.location.origin+"/chat-user-hash").then(e=>e.json()).catch(e=>(console.error("Error fetching chat user hash:",e),{})),window.FrontChat("init",{...e,userHash:t,userId:n,email:n}))):console.error("FrontChat is not available on the window object.")},document.body.appendChild(e))}openPrivacyPreferencesButton&&openPrivacyPreferencesButton.addEventListener("click",function(){setIsShowingCookieBanner(!0)}),initAlgoliaSearchBox(knowledgeBaseSearchTextTranslations[getLocaleFromUrl()],searchBoxId="#pageHeaderSearchBox",searchBoxHitsId="#pageHeaderSearchBoxHits"),initCookiePermissions(),setupLocaleDropdown(),initFrontChatWidget(),document.addEventListener("visibilitychange",()=>{document.hidden&&interactionEventClient.sendPageViewInteractionAsync()});