function computeArticleEditedTime(){var e;document.getElementById("article-edited")&&(e=Date.now()-Number(document.getElementById("article-edited").getAttribute("data-edited")),e=computeEditedTime(e,getLocaleFromUrl()),document.getElementById("article-edited").innerHTML+=" "+e)}function generateOnClickLinks(){var t;for(t of document.getElementsByClassName("article-heading-wrapper")){let e=document.createElement("a");e.setAttribute("href","#"+t.getAttribute("data-link")),e.setAttribute("id",t.getAttribute("data-link")),e.setAttribute("data-copied","false"),e.classList.add("article-heading-link-container");var n=document.createElement("div"),n=(n.classList.add("kb-inline-icon","checkmark"),n.setAttribute("style","background: var(--green-shade40);"),e.append(n),document.createElement("div"));n.classList.add("kb-inline-icon","link"),n.setAttribute("style","background: var(--secondary-text-color);"),e.append(n),e.onclick=()=>copyHeadingLinkToClipboard(e),e.onmouseleave=()=>e.setAttribute("data-copied","false"),e.onmouseenter=()=>e.setAttribute("data-copied","false"),t.prepend(e)}}function copyHeadingLinkToClipboard(e){e.setAttribute("data-copied","true"),window.location.hash=e.id,copyToClipboard(window.location.href)}function highlightCodeBlocks(){document.querySelectorAll("code").forEach(e=>{hljs.highlightElement(e)})}function getVideoPlaceholderSrc(e){if("IFRAME"!==e.tagName)return e.getAttribute("data-video-src")}function decoratePlaceholderVideoInteractions(e){let t=getVideoPlaceholderSrc(e);t&&(e.querySelector("button.primary").onclick=()=>{embedAllVideosForHost(new URL(t).hostname)})}function embedVideoContent(e){var t,n=getVideoPlaceholderSrc(e);n&&((t=document.createElement("iframe")).setAttribute("src",n),t.setAttribute("allow","fullscreen;"),e.replaceWith(t))}function embedAllVideosForHost(n){document.querySelectorAll("div .kb-video-embed").forEach(e=>{var e=e.firstElementChild,t=getVideoPlaceholderSrc(e);t&&t.includes(n)&&embedVideoContent(e)})}function decoratePlaceholderVideos(){document.querySelectorAll("div .kb-video-embed").forEach(e=>{decoratePlaceholderVideoInteractions(e.firstElementChild)})}let ARTICLE_VOTES_LOCAL_STORAGE_KEY="articleVotes";function getArticleIdFromUrl(){var e=new URL(window.location.href).pathname.match(/\/articles\/(\d+)/);return e?e[1]:void 0}function getArticleVotesFromLocalStorage(){try{return JSON.parse(localStorage.getItem(ARTICLE_VOTES_LOCAL_STORAGE_KEY))||{}}catch(e){return console.error("Error parsing localStorage data:",e),{}}}function setArticleVotesToLocalStorage(e){try{localStorage.setItem(ARTICLE_VOTES_LOCAL_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Error setting localStorage data:",e)}}function getArticleRevisionId(){return document.getElementById("article-edited").getAttribute("data-id")}function getArticleReactionVoteKey(){var e=getArticleIdFromUrl(),t=getArticleRevisionId();if(e&&t)return e+"-"+t}function registerVote(e){var t=getArticleVotesFromLocalStorage(),n=getArticleReactionVoteKey();n&&t&&(t[n]||setArticleVotesToLocalStorage({...t,[n]:e}))}function shouldVote(){var e=getArticleReactionVoteKey();return!e||!getArticleVotesFromLocalStorage()[e]}function handleOnClickReactionButton({buttonId:e,callback:t}){e=document.getElementById(e);e&&e.addEventListener("mousedown",async()=>t())}let articleReactionsResponseStatus={SUCCESS:"success",ERROR:"error"},articleReactionsType={POSITIVE:"positive",NEGATIVE:"negative"},shouldPreventTriggeringEvents=Boolean(window.shouldPreventTriggeringEvents);function showReactionResponseMessage(e){var[t]=document.getElementsByClassName("reaction-error-message"),[n]=document.getElementsByClassName("reaction-success-message"),[o]=document.getElementsByClassName("reaction-box-response");e===articleReactionsResponseStatus.ERROR?(t.classList.add("visible"),o.classList.add("visible")):e===articleReactionsResponseStatus.SUCCESS&&(n.classList.add("visible"),o.classList.add("visible"))}function resetReactionResponseErrorMessage(){var[e]=document.getElementsByClassName("reaction-error-message"),[t]=document.getElementsByClassName("reaction-box-response");e.classList.remove("visible"),t.classList.remove("visible")}function setAreReactionButtonsDisabled(t){document.querySelectorAll("#positive-reaction-button, #negative-reaction-button").forEach(e=>e.disabled=t)}function setIsSubmitFormButtonDisabled(e){document.querySelector("#reaction-feedback-form-submit-button").disabled=e}async function onArticleReactionButtonClickedAsync({sendArticleReactionInteractionAsync:e,reactionType:t,next:n}){var[o]=document.getElementsByClassName("reaction-box-content");if(!shouldPreventTriggeringEvents){resetReactionResponseErrorMessage(),setAreReactionButtonsDisabled(!0);try{return await e,o.classList.remove("visible"),registerVote(t),n()}catch{o.classList.add("visible"),showReactionResponseMessage(articleReactionsResponseStatus.ERROR)}finally{setAreReactionButtonsDisabled(!1)}}}function initializeOnClickReactionButtons(){let[e]=document.getElementsByClassName("reaction-box-feedback-form");[{buttonId:"positive-reaction-button",callback:async()=>onArticleReactionButtonClickedAsync({sendArticleReactionInteractionAsync:interactionEventClient.sendArticleLikedInteractionAsync(),reactionType:articleReactionsType.POSITIVE,next:()=>showReactionResponseMessage(articleReactionsResponseStatus.SUCCESS)})},{buttonId:"negative-reaction-button",callback:async()=>onArticleReactionButtonClickedAsync({sendArticleReactionInteractionAsync:interactionEventClient.sendArticleDislikedInteractionAsync(),reactionType:articleReactionsType.NEGATIVE,next:()=>e.classList.add("visible")})}].forEach(handleOnClickReactionButton)}function toggleFeedbackSubmitButtonOnInput(){let e=document.getElementById("feedback");e&&e.addEventListener("input",()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px",setIsSubmitFormButtonDisabled(0===e.value.trim().length)})}function sendArticleCommentAsync(){var e=document.getElementById("feedback"),t=window.kbServer+"/portal_event";return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cs:window.cslug,k_id:parseInt(window.kbid,10),cmt:e.value,v_id:PermissionsManager.getVisitorId(),ul:interactionEventClient.getLocale(),et:"article_commented",upn:window.location.pathname+window.location.search}),keepalive:!0,referrerPolicy:"no-referrer-when-downgrade"})}function handleSubmitFeedbackForm(){var e=document.getElementById("kb-reaction-feedback-form");let[t]=document.getElementsByClassName("reaction-feedback-form-content");e&&e.addEventListener("submit",async e=>{if(e.preventDefault(),!shouldPreventTriggeringEvents){resetReactionResponseErrorMessage(),setIsSubmitFormButtonDisabled(!0);try{if(!(await sendArticleCommentAsync()).ok)throw new Error("Failed to send article feedback");showReactionResponseMessage(articleReactionsResponseStatus.SUCCESS),t.classList.add("hidden")}catch{showReactionResponseMessage(articleReactionsResponseStatus.ERROR)}finally{setIsSubmitFormButtonDisabled(!1)}}})}function setIsShowingReactionBoxLoadingState(e){var t=document.querySelector(".reaction-box-loading-indicator");t&&(e?t.classList.add("visible"):t.classList.remove("visible"))}function setupArticleReactionsBox(){setIsShowingReactionBoxLoadingState(!0);var[e]=document.getElementsByClassName("reaction-box-content");e&&(shouldVote()?(e.classList.add("visible"),toggleFeedbackSubmitButtonOnInput(),handleSubmitFeedbackForm()):showReactionResponseMessage(articleReactionsResponseStatus.SUCCESS),setIsShowingReactionBoxLoadingState(!1))}function setupOnClickActions(){generateOnClickLinks(),initializeOnClickReactionButtons()}computeArticleEditedTime(),setupOnClickActions(),highlightCodeBlocks(),decoratePlaceholderVideos(),setupArticleReactionsBox(),window.location.hash&&setTimeout(()=>{var e=document.getElementById(window.location.hash.replace("#",""));e&&e.scrollIntoView()},50),lightbox.option({resizeDuration:200,disableScrolling:!0});